<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nieuwe Wereld Stock Inventaris</title>
    <link rel="icon" type="image/jpeg" href="logo.jpg">
    <link rel="shortcut icon" type="image/jpeg" href="logo.jpg">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #5D4037 0%, #6F4E37 30%, #8D6E63 70%, #A1887F 100%);
            min-height: 100vh;
            padding: 20px;
            color: #3E2723;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: #F5E6D3;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(75, 55, 28, 0.4);
            padding: 30px;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid #6F4E37;
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .logo {
            max-height: 80px;
            max-width: 200px;
            object-fit: contain;
            filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.2));
        }

        h1 {
            color: #4B371C;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.15);
        }

        .subtitle {
            color: #6F4E37;
            font-size: 1.1em;
        }

        .actions {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
            justify-content: center;
        }

        button {
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }

        .btn-save {
            background: #6F4E37;
            color: #F5E6D3;
        }

        .btn-save:hover {
            background: #5D4037;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(75, 55, 28, 0.4);
        }

        .btn-new-week {
            background: #A75C3B;
            color: #F5E6D3;
        }

        .btn-new-week:hover {
            background: #8D4A2F;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(167, 92, 59, 0.4);
        }

        .btn-export {
            background: #BC6C25;
            color: #F5E6D3;
        }

        .btn-export:hover {
            background: #A75C3B;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(188, 108, 37, 0.4);
        }

        .table-wrapper {
            overflow-x: auto;
            margin-bottom: 30px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: #FFFFFF;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 12px rgba(75, 55, 28, 0.2);
        }

        thead {
            background: linear-gradient(135deg, #4B371C 0%, #6F4E37 50%, #8D6E63 100%);
            color: #F5E6D3;
        }

        th {
            padding: 15px;
            text-align: left;
            font-weight: bold;
            font-size: 1.1em;
            position: relative;
        }

        .tooltip {
            position: relative;
            cursor: help;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #4B371C;
            color: #F5E6D3;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1000;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85em;
            font-weight: normal;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            white-space: normal;
            word-wrap: break-word;
        }

        .tooltip .tooltiptext::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #4B371C transparent transparent transparent;
        }

        .tooltip:hover .tooltiptext,
        .tooltip:focus .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        @media (max-width: 768px) {
            .tooltip .tooltiptext {
                width: 150px;
                font-size: 0.75em;
                margin-left: -75px;
            }
        }

        tbody tr {
            border-bottom: 1px solid #E1D9C1;
            transition: background 0.2s ease;
        }

        tbody tr:hover {
            background: #F5E6D3;
        }

        tbody tr.low-stock {
            background: #F5D5C1;
        }

        tbody tr.low-stock:hover {
            background: #E8C4A8;
        }

        td {
            padding: 12px 15px;
        }

        .product-name {
            font-weight: 600;
            color: #4B371C;
            min-width: 150px;
        }

        input[type="number"] {
            width: 100%;
            padding: 12px;
            font-size: 1.1em;
            border: 2px solid #D0C3B0;
            border-radius: 6px;
            background: #FFFFFF;
            color: #4B371C;
            transition: all 0.3s ease;
            min-width: 100px;
        }

        input[type="number"]:focus {
            outline: none;
            border-color: #6F4E37;
            background: #F5E6D3;
            box-shadow: 0 0 8px rgba(111, 78, 55, 0.4);
        }

        .total-units {
            font-weight: bold;
            font-size: 1.1em;
            color: #6F4E37;
            text-align: center;
        }

        .low-stock .total-units {
            color: #A75C3B;
            font-weight: 900;
        }

        .history-section {
            margin-top: 40px;
            border-top: 3px solid #6F4E37;
            padding-top: 30px;
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            cursor: pointer;
            padding: 15px;
            background: #E1D9C1;
            border-radius: 8px;
            transition: background 0.3s ease;
        }

        .history-header:hover {
            background: #D0C3B0;
        }

        .history-header h2 {
            color: #4B371C;
            font-size: 1.8em;
        }

        .history-toggle {
            font-size: 1.5em;
            color: #6F4E37;
            transition: transform 0.3s ease;
        }

        .history-toggle.expanded {
            transform: rotate(180deg);
        }

        .history-toggle.expanded {
            transform: rotate(180deg);
        }

        .history-content {
            display: none;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .history-content.show {
            display: block;
            max-height: 5000px;
        }

        .history-entry {
            background: #FFFFFF;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(75, 55, 28, 0.15);
        }

        .history-date {
            font-weight: bold;
            color: #4B371C;
            font-size: 1.2em;
            margin-bottom: 15px;
            padding: 10px 15px;
            border-bottom: 2px solid #D0C3B0;
            cursor: pointer;
            user-select: none;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.3s ease;
            border-radius: 6px;
        }

        .history-date:hover {
            background: #F5E6D3;
        }

        .history-date-toggle {
            font-size: 0.8em;
            transition: transform 0.3s ease;
            color: #6F4E37;
        }

        .history-date-toggle.expanded {
            transform: rotate(180deg);
        }

        .history-entry-content {
            overflow: hidden;
            max-height: 0;
            transition: max-height 0.3s ease, opacity 0.3s ease;
            opacity: 0;
            margin: 0;
        }

        .history-entry-content.expanded {
            max-height: 2000px;
            opacity: 1;
        }

        .history-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.95em;
        }

        .history-table th {
            background: linear-gradient(135deg, #6F4E37 0%, #8D6E63 100%);
            color: #F5E6D3;
            padding: 10px;
            font-size: 0.95em;
        }

        .history-table td {
            padding: 8px 10px;
            border-bottom: 1px solid #E1D9C1;
        }

        .status-message {
            text-align: center;
            padding: 10px;
            margin-bottom: 15px;
            border-radius: 6px;
            font-weight: bold;
            display: none;
        }

        .status-message.show {
            display: block;
        }

        .status-success {
            background: #D0C3B0;
            color: #4B371C;
            border: 1px solid #A1887F;
        }

        .status-info {
            background: #E1D9C1;
            color: #5D4037;
            border: 1px solid #BC6C25;
        }

        footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #D0C3B0;
            color: #6F4E37;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            .logo-container {
                flex-direction: column;
                gap: 10px;
            }

            .logo {
                max-height: 60px;
            }

            h1 {
                font-size: 1.8em;
            }

            .actions {
                flex-direction: column;
            }

            button {
                width: 100%;
            }

            th, td {
                padding: 8px;
                font-size: 0.9em;
            }

            input[type="number"] {
                font-size: 1em;
                padding: 10px;
            }

            .table-wrapper {
                overflow-x: scroll;
            }
        }

        @media print {
            body {
                background: white;
            }

            .container {
                box-shadow: none;
            }

            .actions, .history-section {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo-container">
                <img src="logo.jpg" alt="Nieuwe Wereld Logo" class="logo">
                <h1>Nieuwe Wereld Stock Inventaris</h1>
            </div>
            <p class="subtitle">Eenvoudig voorraadbeheer voor uw cafÃ©</p>
        </header>

        <div id="statusMessage" class="status-message"></div>

        <div class="actions">
            <button class="btn-save" onclick="saveCurrentWeek()">ðŸ’¾ Opslaan</button>
            <button class="btn-new-week" onclick="startNewWeek()">ðŸ“… Nieuwe Week</button>
            <button class="btn-export" onclick="exportToCSV()">ðŸ“Š Exporteer CSV</button>
        </div>

        <div class="table-wrapper">
            <table id="inventoryTable">
                <thead>
                    <tr>
                        <th>Product Naam</th>
                        <th class="tooltip">Zuipbakken Aantal
                            <span class="tooltiptext">Volle bakken (1 bak = 24 eenheden)</span>
                        </th>
                        <th class="tooltip">Zuip Aantal
                            <span class="tooltiptext">Losse eenheden</span>
                        </th>
                        <th>Eenheden TOTAAL</th>
                    </tr>
                </thead>
                <tbody id="inventoryBody">
                    <!-- Rows will be generated by JavaScript -->
                </tbody>
            </table>
        </div>

        <div class="history-section">
            <div class="history-header" onclick="toggleHistory()">
                <h2>ðŸ“š Geschiedenis</h2>
                <span class="history-toggle" id="historyToggle">â–¼</span>
            </div>
            <div class="history-content" id="historyContent">
                <div id="historyEntries"></div>
            </div>
        </div>

        <footer>
            <p>Offline-first inventarissysteem | Laatste update: <span id="lastUpdate"></span></p>
        </footer>
    </div>

    <script>
        // Initial product data
        const initialProducts = [
            { name: 'Rodenbach', zuip: 32, zuipbakken: 0, eenheden: 768 },
            { name: 'Tongerlo Bruin', zuip: 14, zuipbakken: 0, eenheden: 336 },
            { name: 'Tongerlo Blond', zuip: 6, zuipbakken: 0, eenheden: 144 },
            { name: 'Spuitwater', zuip: 3, zuipbakken: 0, eenheden: 72 },
            { name: 'Orval', zuip: 8, zuipbakken: 0, eenheden: 192 },
            { name: 'Cola', zuip: 8, zuipbakken: 0, eenheden: 192 },
            { name: 'Cola zero', zuip: 1, zuipbakken: 0, eenheden: 24 },
            { name: 'Omer', zuip: 5, zuipbakken: 0, eenheden: 120 },
            { name: 'Appel', zuip: 2, zuipbakken: 0, eenheden: 48 },
            { name: 'Witkap', zuip: 4, zuipbakken: 0, eenheden: 96 },
            { name: 'Ice Tea', zuip: 2, zuipbakken: 0, eenheden: 48 },
            { name: '7-Up', zuip: 17, zuipbakken: 0, eenheden: 408 },
            { name: 'Limo', zuip: 6, zuipbakken: 0, eenheden: 144 },
            { name: 'Rouge', zuip: 3, zuipbakken: 0, eenheden: 72 },
            { name: 'Keizer Karel', zuip: 4, zuipbakken: 0, eenheden: 96 },
            { name: 'Ommegang', zuip: 4, zuipbakken: 0, eenheden: 96 },
            { name: 'Kriek', zuip: 3, zuipbakken: 0, eenheden: 72 },
            { name: 'Export', zuip: 2, zuipbakken: 0, eenheden: 48 },
            { name: 'Westmalle', zuip: 4, zuipbakken: 0, eenheden: 96 },
            { name: 'Flandrien', zuip: 6, zuipbakken: 0, eenheden: 144 },
            { name: 'Cornet', zuip: 6, zuipbakken: 0, eenheden: 144 },
            { name: 'Rochefort 10', zuip: 7, zuipbakken: 0, eenheden: 168 },
            { name: 'Rochefort 8', zuip: 7, zuipbakken: 0, eenheden: 168 },
            { name: 'Primus', zuip: 70, zuipbakken: 0, eenheden: 1680 },
            { name: "L'Arrogant", zuip: 2, zuipbakken: 0, eenheden: 48 }
        ];

        let currentProducts = {};
        let autoSaveTimer = null;

        // Initialize application
        function init() {
            loadCurrentData();
            renderTable();
            loadHistory();
            updateLastUpdate();
        }

        // Load current data from localStorage or initialize
        function loadCurrentData() {
            const saved = localStorage.getItem('currentStock');
            if (saved) {
                currentProducts = JSON.parse(saved);
            } else {
                // Initialize with initial values
                initialProducts.forEach(product => {
                    currentProducts[product.name] = {
                        zuip: product.zuip,
                        zuipbakken: product.zuipbakken,
                        eenheden: product.eenheden,
                        initialZuip: product.zuip,
                        initialZuipbakken: product.zuipbakken,
                        initialEenheden: product.eenheden
                    };
                });
                saveCurrentData();
            }
        }

        // Save current data to localStorage
        function saveCurrentData() {
            localStorage.setItem('currentStock', JSON.stringify(currentProducts));
        }

        // Calculate total units: (Zuipbakken Ã— 24) + Zuip
        function calculateTotal(zuip, zuipbakken) {
            return (zuipbakken * 24) + zuip;
        }

        // Check if stock is low (<20% of initial)
        function isLowStock(product) {
            const threshold = product.initialEenheden * 0.2;
            return product.eenheden < threshold;
        }

        // Render the inventory table
        function renderTable() {
            const tbody = document.getElementById('inventoryBody');
            tbody.innerHTML = '';

            Object.keys(currentProducts).sort().forEach(productName => {
                const product = currentProducts[productName];
                const row = document.createElement('tr');
                
                if (isLowStock(product)) {
                    row.classList.add('low-stock');
                }

                row.innerHTML = `
                    <td class="product-name">${productName}</td>
                    <td>
                        <input type="number" 
                               value="${product.zuipbakken}" 
                               min="0" 
                               data-product="${productName}" 
                               data-field="zuipbakken"
                               onchange="updateProduct('${productName}', 'zuipbakken', this.value)"
                               oninput="debounceAutoSave()">
                    </td>
                    <td>
                        <input type="number" 
                               value="${product.zuip}" 
                               min="0" 
                               data-product="${productName}" 
                               data-field="zuip"
                               onchange="updateProduct('${productName}', 'zuip', this.value)"
                               oninput="debounceAutoSave()">
                    </td>
                    <td class="total-units">${product.eenheden}</td>
                `;

                tbody.appendChild(row);
            });
        }

        // Update product value
        function updateProduct(productName, field, value) {
            const numValue = parseInt(value) || 0;
            currentProducts[productName][field] = numValue;
            
            // Recalculate total
            const zuip = currentProducts[productName].zuip;
            const zuipbakken = currentProducts[productName].zuipbakken;
            currentProducts[productName].eenheden = calculateTotal(zuip, zuipbakken);
            
            // Update display - find row by product name
            const rows = document.querySelectorAll('#inventoryBody tr');
            rows.forEach(row => {
                const nameCell = row.querySelector('.product-name');
                if (nameCell && nameCell.textContent === productName) {
                    const totalCell = row.querySelector('.total-units');
                    if (totalCell) {
                        totalCell.textContent = currentProducts[productName].eenheden;
                    }
                    
                    // Update low stock styling
                    if (isLowStock(currentProducts[productName])) {
                        row.classList.add('low-stock');
                    } else {
                        row.classList.remove('low-stock');
                    }
                }
            });
        }

        // Debounced auto-save
        function debounceAutoSave() {
            clearTimeout(autoSaveTimer);
            autoSaveTimer = setTimeout(() => {
                saveCurrentData();
                showStatus('Automatisch opgeslagen', 'success');
            }, 1000);
        }

        // Save current week to history
        function saveCurrentWeek() {
            const history = getHistory();
            const snapshot = {
                timestamp: new Date().toISOString(),
                date: new Date().toLocaleDateString('nl-NL', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                }),
                products: JSON.parse(JSON.stringify(currentProducts))
            };
            
            history.unshift(snapshot);
            
            // Limit to 52 weeks
            if (history.length > 52) {
                history.pop();
            }
            
            localStorage.setItem('stockHistory', JSON.stringify(history));
            
            // Reset all input values to 0
            Object.keys(currentProducts).forEach(productName => {
                currentProducts[productName].zuip = 0;
                currentProducts[productName].zuipbakken = 0;
                currentProducts[productName].eenheden = 0;
            });
            
            saveCurrentData();
            renderTable();
            showStatus('Huidige week opgeslagen! Velden gereset naar 0.', 'success');
            loadHistory();
        }

        // Start new week
        function startNewWeek() {
            if (!confirm('Weet u zeker dat u een nieuwe week wilt starten? De huidige waarden worden opgeslagen en gebruikt als nieuwe beginwaarden.')) {
                return;
            }
            
            // Save current state to history first
            saveCurrentWeek();
            
            // Update initial values to current values
            Object.keys(currentProducts).forEach(productName => {
                const product = currentProducts[productName];
                product.initialZuip = product.zuip;
                product.initialZuipbakken = product.zuipbakken;
                product.initialEenheden = product.eenheden;
                
                // Reset current values to zero
                product.zuip = 0;
                product.zuipbakken = 0;
                product.eenheden = 0;
            });
            
            saveCurrentData();
            renderTable();
            showStatus('Nieuwe week gestart!', 'info');
        }

        // Get history from localStorage
        function getHistory() {
            const saved = localStorage.getItem('stockHistory');
            return saved ? JSON.parse(saved) : [];
        }

        // Load and display history
        function loadHistory() {
            const history = getHistory();
            const container = document.getElementById('historyEntries');
            
            if (history.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #6F4E37; padding: 20px;">Nog geen geschiedenis beschikbaar.</p>';
                return;
            }
            
            container.innerHTML = '';
            
            history.forEach((entry, index) => {
                const entryDiv = document.createElement('div');
                entryDiv.className = 'history-entry';
                
                const dateHeader = document.createElement('div');
                dateHeader.className = 'history-date';
                dateHeader.onclick = () => toggleHistoryEntry(index);
                dateHeader.innerHTML = `
                    <span>ðŸ“… ${entry.date}</span>
                    <span class="history-date-toggle" id="toggle-${index}">â–¼</span>
                `;
                
                const contentDiv = document.createElement('div');
                contentDiv.className = 'history-entry-content';
                contentDiv.id = `content-${index}`;
                
                let tableHTML = `
                    <table class="history-table">
                        <thead>
                            <tr>
                                <th>Product</th>
                                <th class="tooltip">Zuipbakken
                                    <span class="tooltiptext">Volle bakken (1 bak = 24 eenheden)</span>
                                </th>
                                <th class="tooltip">Zuip
                                    <span class="tooltiptext">Losse eenheden</span>
                                </th>
                                <th>Eenheden</th>
                            </tr>
                        </thead>
                        <tbody>
                `;
                
                Object.keys(entry.products).sort().forEach(productName => {
                    const product = entry.products[productName];
                    tableHTML += `
                        <tr>
                            <td>${productName}</td>
                            <td>${product.zuipbakken}</td>
                            <td>${product.zuip}</td>
                            <td>${product.eenheden}</td>
                        </tr>
                    `;
                });
                
                tableHTML += '</tbody></table>';
                contentDiv.innerHTML = tableHTML;
                
                entryDiv.appendChild(dateHeader);
                entryDiv.appendChild(contentDiv);
                container.appendChild(entryDiv);
            });
        }

        // Toggle individual history entry
        function toggleHistoryEntry(index) {
            const content = document.getElementById(`content-${index}`);
            const toggle = document.getElementById(`toggle-${index}`);
            
            if (content && toggle) {
                content.classList.toggle('expanded');
                toggle.classList.toggle('expanded');
            }
        }

        // Toggle history section
        function toggleHistory() {
            const content = document.getElementById('historyContent');
            const toggle = document.getElementById('historyToggle');
            
            content.classList.toggle('show');
            toggle.classList.toggle('expanded');
        }

        // Export to CSV
        function exportToCSV() {
            const history = getHistory();
            
            if (history.length === 0 && Object.keys(currentProducts).length === 0) {
                showStatus('Geen data om te exporteren', 'info');
                return;
            }
            
            let csv = '';
            
            // Add header for the entire document
            csv += 'Nieuwe Wereld Stock Inventaris\n';
            csv += `GeÃ«xporteerd op: ${new Date().toLocaleDateString('nl-NL')} ${new Date().toLocaleTimeString('nl-NL')}\n`;
            csv += '\n';
            
            // Export history entries
            if (history.length > 0) {
                csv += 'GESCHIEDENIS\n';
                csv += '='.repeat(80) + '\n';
                csv += '\n';
                
                history.forEach((entry, index) => {
                    // Date at the top
                    csv += `Datum: ${entry.date}\n`;
                    csv += '\n';
                    // Two columns: Drank and Totaal
                    csv += 'Drank,Totaal\n';
                    
                    Object.keys(entry.products).sort().forEach(productName => {
                        const product = entry.products[productName];
                        csv += `"${productName}",${product.eenheden}\n`;
                    });
                    
                    // Add empty line between entries, except after the last one
                    if (index < history.length - 1) {
                        csv += '\n';
                    }
                });
                
                csv += '\n';
            }
            
            // Add current week
            if (Object.keys(currentProducts).length > 0) {
                csv += 'HUIDIGE WEEK\n';
                csv += '='.repeat(80) + '\n';
                csv += '\n';
                
                const currentDate = new Date().toLocaleDateString('nl-NL', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                });
                csv += `Datum: ${currentDate}\n`;
                csv += '\n';
                csv += 'Drank,Totaal\n';
                
                Object.keys(currentProducts).sort().forEach(productName => {
                    const product = currentProducts[productName];
                    csv += `"${productName}",${product.eenheden}\n`;
                });
            }
            
            // Add BOM for Excel compatibility
            const BOM = '\uFEFF';
            const blob = new Blob([BOM + csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', `stock_inventaris_${new Date().toISOString().split('T')[0]}.csv`);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showStatus('CSV bestand gedownload!', 'success');
        }

        // Show status message
        function showStatus(message, type) {
            const statusDiv = document.getElementById('statusMessage');
            statusDiv.textContent = message;
            statusDiv.className = `status-message status-${type} show`;
            
            setTimeout(() => {
                statusDiv.classList.remove('show');
            }, 3000);
        }

        // Update last update timestamp
        function updateLastUpdate() {
            const lastUpdate = localStorage.getItem('lastUpdate');
            if (lastUpdate) {
                document.getElementById('lastUpdate').textContent = new Date(lastUpdate).toLocaleString('nl-NL');
            } else {
                document.getElementById('lastUpdate').textContent = new Date().toLocaleString('nl-NL');
            }
        }

        // Initialize on page load
        window.addEventListener('DOMContentLoaded', init);
        
        // Save last update time periodically
        setInterval(() => {
            localStorage.setItem('lastUpdate', new Date().toISOString());
            updateLastUpdate();
        }, 60000); // Every minute
    </script>
</body>
</html>

